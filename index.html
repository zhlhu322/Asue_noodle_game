<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜¿Sueæ³¡éºµå¤§æŒ‘æˆ° (å¿«æ‰‹ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .game-container {
            width: 100%;
            max-width: 900px;
            background: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            overflow: hidden;
            border: 4px solid #f97316; /* Orange border for game feel */
        }
        /* --- Kitchen Background Setup --- */
        .kitchen-area {
            background-color: transparent; 
            padding: 0;
            min-height: 450px;
            position: relative;
            overflow: hidden;
        }
        .kitchen-wall {
            height: 250px;
            background-color: #e0f2f1; /* Light cyan wall */
            /* Simple tile pattern using gradient */
            background-image: linear-gradient(45deg, #d3e9e7 25%, transparent 25%), linear-gradient(-45deg, #d3e9e7 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #d3e9e7 75%), linear-gradient(-45deg, transparent 75%, #d3e9e7 75%);
            background-size: 50px 50px;
            background-position: 0 0, 0 25px, 25px -25px, -25px 25px;
            border-bottom: 10px solid #b3a89a; /* Wall-to-counter trim */
        }
        .kitchen-counter {
            height: 200px; /* Counter height */
            background: linear-gradient(to bottom, #795548, #4e342e); /* Dark wood look */
            position: relative;
            z-index: 5;
            padding: 20px 40px; /* Horizontal padding to push items away from center */
            display: flex;
            justify-content: space-between; /* Ensures center is clear */
            align-items: flex-end; 
        }
        /* --- Tool and Pot Styling --- */
        .tool {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: grab;
            transition: transform 0.1s;
            z-index: 15; 
            margin-bottom: 20px; 
            width: 100px; /* Fixed width for better layout control */
        }
        .tool.disabled {
            cursor: not-allowed;
            opacity: 0.5;
            pointer-events: none;
        }
        .tool:hover:not(.disabled) {
            transform: scale(1.05);
        }
        .pot-on-stove {
            position: absolute;
            bottom: 50px; 
            left: 50%;
            transform: translateX(-50%);
            width: 180px; 
            height: 180px;
            z-index: 10;
        }
        .stove {
            background: #374151;
            width: 180px;
            height: 30px;
            border-radius: 0 0 10px 10px;
            position: absolute;
            bottom: 0;
            left: 0;
            transform: none;
        }
        .burner {
            left: 40px;
        }
        .pot {
            width: 100px;
            height: 60px;
            background: #e5e7eb;
            border-radius: 40px 40px 10px 10px;
            position: absolute;
            top: 10px; 
            left: 40px;
            border: 3px solid #d1d5db;
        }
        .pot-handle {
            position: absolute;
            width: 20px;
            height: 5px;
            background: #9ca3af;
            top: 35px; 
            border-radius: 2px;
        }
        .pot-handle-left { left: 15px; }
        .pot-handle-right { right: 15px; }
        .water {
            background: #42a5f5;
            height: 0; /* Starts empty */
            width: 90px;
            position: absolute;
            bottom: 0;
            left: 5px;
            border-radius: 35px 35px 0 0;
            transition: all 0.5s ease-in-out, background-color 0.5s;
        }
        .water.filled {
            height: 25px; /* Fill state */
            top: 5px;
        }
        .water.boiling {
            background: #00bcd4;
            animation: boil 0.5s infinite alternate;
        }
        @keyframes boil {
            from { box-shadow: 0 0 5px rgba(0, 0, 0, 0.2) inset; }
            to { box-shadow: 0 0 15px rgba(66, 165, 245, 0.5) inset; }
        }
        .noodles {
            background: #ffc107;
            height: 10px;
            width: 70px;
            position: absolute;
            top: 10px;
            left: 15px;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.5s, background-color 2s ease-out; /* Added background-color transition */
        }
        .noodles.in-pot { opacity: 1; }
        .noodles.cooked { background: #f0e68c; /* Lighter yellow/softened look */ }
        .noodles.burnt { background: #333; /* Dark brown/black for burnt */ }

        .ramen-bowl {
            width: 120px;
            height: 80px;
            background: #ffffff;
            border: 4px solid #f97316;
            border-radius: 0 0 50% 50%;
            position: relative;
            z-index: 5;
            cursor: pointer;
            transition: transform 0.2s;
        }
        /* --- ä¿®æ­£: èª¿æ•´å…§å®¹ç‰©çš„ä½ç½®å’Œå¤§å°ä¾†æ¨¡æ“¬æ·±åº¦ --- */
        .ramen-bowl-content {
            height: 50px; /* å…§å®¹ç‰©é«˜åº¦ç•¥ä½æ–¼ç¢—é«˜ */
            width: 90%; /* å…§å®¹ç‰©å¯¬åº¦ç•¥çª„æ–¼ç¢—å£ */
            left: 5%; /* å…§å®¹ç‰©ç½®ä¸­ */
            background: #ffe082;
            border-radius: 0 0 50% 50%;
            position: absolute;
            top: 10px; /* å¾é ‚éƒ¨å‘ä¸‹ç§»å‹•ï¼Œéœ²å‡ºç¢—é‚Šç·£ */
            opacity: 0;
            transition: opacity 0.5s;
        }
        /* ------------------------------------------- */

        .ramen-bowl:hover:not(.disabled) {
            transform: translateY(-5px);
        }
        .fire {
            position: absolute;
            bottom: 25px; 
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 20px;
            background: linear-gradient(to top, #ff6b6b, #ffda79);
            border-radius: 50%;
            box-shadow: 0 0 10px #ff6b6b;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .fire.on {
            opacity: 1;
        }
        /* --- Stove Control Knob --- */
        .stove-knob {
            position: absolute;
            bottom: 5px;
            right: 15px;
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            border-radius: 50%;
            border: 3px solid #374151;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3), inset 0 -2px 3px rgba(0, 0, 0, 0.2);
            z-index: 20;
        }
        .stove-knob::before {
            content: '';
            width: 3px;
            height: 12px;
            background: #ef4444;
            position: absolute;
            top: 3px;
            border-radius: 2px;
        }
        .stove-knob:hover {
            transform: scale(1.1);
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4), inset 0 -2px 3px rgba(0, 0, 0, 0.2);
        }
        .stove-knob.active {
            transform: rotate(90deg);
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        .stove-knob.active::before {
            background: #fef3c7;
        }
        .stove-knob.disabled {
            cursor: not-allowed;
            opacity: 0.4;
            pointer-events: none;
        }
    </style>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firestore Setup - Mandatory boilerplate
        setLogLevel('debug');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        let firebaseApp, db, auth, userId;
        let isAuthReady = false;

        const initFirebase = async () => {
            try {
                const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
                if (Object.keys(firebaseConfig).length === 0) {
                    console.error("Firebase config not found.");
                    return;
                }
                firebaseApp = initializeApp(firebaseConfig);
                db = getFirestore(firebaseApp);
                auth = getAuth(firebaseApp);

                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        console.log("Authenticated user ID:", userId);
                    } else {
                        try {
                            // If no initial token, sign in anonymously
                            if (typeof __initial_auth_token !== 'undefined') {
                                await signInWithCustomToken(auth, __initial_auth_token);
                            } else {
                                await signInAnonymously(auth);
                            }
                        } catch (error) {
                            console.error("Authentication failed:", error);
                        }
                    }
                    isAuthReady = true;
                    // Update user ID display once ready
                    document.getElementById('user-id-display').textContent = `User ID: ${userId || 'N/A'}`;
                });
            } catch (e) {
                console.error("Error during Firebase initialization:", e);
            }
        };

        // --- Game Constants ---
        const COOK_TIME_IDEAL = 7; // æœ€ä½³çƒ¹é£ªæ™‚é–“ (ç§’)
        const COOK_TIME_MAX = 20; // ç‡’ç„¦æ™‚é–“ (ç§’)
        const TOTAL_TIME_LIMIT = 60; // ç¸½æ™‚é™ (ç§’)

        // --- Game State Variables ---
        let gameStatus = 'IDLE'; // IDLE, COOKING, GAME_OVER
        // æ­¥é©Ÿ: 0: ç­‰å¾…é–‹å§‹, 1: åŠ æ°´, 2: ç…®æ°´, 3: åŠ éºµ, 4: åŠ èª¿å‘³ç²‰ (é–‹å§‹è¨ˆæ™‚), 5: ç­‰å¾…ä¸Šèœ
        let currentStep = 0; 
        let timerInterval;
        let totalTimeElapsed = 0;
        let cookTimeElapsed = 0;
        let totalScore = 0; // ç¸½ç´¯ç©å¾—åˆ†

        // --- DOM Elements ---
        const startButton = document.getElementById('start-game-btn'); 
        const timerDisplay = document.getElementById('timer-display');
        const scoreDisplay = document.getElementById('score-display');
        const statusMessage = document.getElementById('status-message');
        const feedbackModal = document.getElementById('feedback-modal');
        const modalMessage = document.getElementById('modal-message');
        const modalScore = document.getElementById('modal-score');

        // Kitchen Items
        const potStove = document.getElementById('pot-on-stove');
        const fireElement = document.getElementById('fire-element');
        const waterElement = document.getElementById('water-element');
        const noodlesElement = document.getElementById('noodles-element');
        const stoveKnob = document.getElementById('stove-knob');
        const waterKettle = document.getElementById('water-kettle');
        const noodlePacket = document.getElementById('noodle-packet');
        const seasoningPacket = document.getElementById('seasoning-packet');
        const ramenBowl = document.getElementById('ramen-bowl');
        const bowlContent = document.getElementById('bowl-content');

        // --- Game Actions ---

        function updateStepStatus(newStep, message, type = 'info') {
            currentStep = newStep;
            statusMessage.textContent = message;
            statusMessage.className = `p-3 font-semibold rounded-lg text-center ${type === 'success' ? 'bg-green-100 text-green-700' : type === 'error' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'}`;

            // Update item accessibility/appearance
            waterKettle.classList.toggle('disabled', newStep !== 1);
            stoveKnob.classList.toggle('disabled', newStep !== 2);
            noodlePacket.classList.toggle('disabled', newStep !== 3);
            seasoningPacket.classList.toggle('disabled', newStep !== 4);
            ramenBowl.classList.toggle('disabled', newStep < 5);
        }

        function setupDragAndDrop() {
            const draggableItems = [waterKettle, noodlePacket, seasoningPacket];
            const dropTarget = potStove; 

            // 1. Draggable Item Setup
            draggableItems.forEach(item => {
                item.onclick = null; 
                
                item.addEventListener('dragstart', (e) => {
                    if (item.classList.contains('disabled')) {
                        e.preventDefault(); 
                        return;
                    }
                    e.dataTransfer.setData('text/plain', item.id);
                    e.dataTransfer.effectAllowed = 'move';
                    item.classList.add('opacity-50', 'scale-95');
                });
                
                item.addEventListener('dragend', (e) => {
                    item.classList.remove('opacity-50', 'scale-95');
                });
            });

            // 2. Drop Target Setup (The Pot Area)
            dropTarget.addEventListener('dragover', (e) => {
                e.preventDefault(); 
                e.dataTransfer.dropEffect = 'move';
            });

            dropTarget.addEventListener('drop', (e) => {
                e.preventDefault();
                const data = e.dataTransfer.getData('text/plain');
                
                if (gameStatus !== 'COOKING') return;

                if (data === 'water-kettle') {
                    addWater();
                } else if (data === 'noodle-packet') {
                    addNoodles();
                } else if (data === 'seasoning-packet') {
                    addSeasoning();
                } else {
                    showNotification('éŒ¯èª¤æ“ä½œï¼é€™ä¸æ˜¯ç…®æ³¡éºµçš„ææ–™ï¼', -20);
                }
            });
        }
        
        function resetPotForNextRamen() {
            // Reset pot visuals
            fireElement.classList.remove('on');
            stoveKnob.classList.remove('active');
            waterElement.classList.remove('boiling', 'filled');
            noodlesElement.classList.remove('in-pot', 'cooked', 'burnt');
            bowlContent.style.opacity = '0'; // Clear the serving bowl content (visual only)

            // Reset timers/steps
            cookTimeElapsed = 0;
            
            // Reset interactions
            stoveKnob.onclick = null;
            ramenBowl.onclick = null;
            
            // Go back to step 1 (Add Water)
            updateStepStatus(1, 'æº–å‚™ä¸‹ä¸€ç¢—ï¼ç¬¬ä¸€æ­¥ï¼šå°‡æ°´å£ºæ‹–æ›³åˆ°é‹å­è£¡åŠ æ°´ï¼', 'info');
        }

        function startGame() {
            if (gameStatus !== 'IDLE' && gameStatus !== 'GAME_OVER') return;

            // Reset State
            gameStatus = 'COOKING';
            totalTimeElapsed = 0;
            totalScore = 0; // Reset total score for a new game
            
            // Reset Pot and UI
            resetPotForNextRamen(); // Start at step 1
            
            startButton.classList.add('hidden');
            feedbackModal.classList.add('hidden');
            timerDisplay.textContent = `æ™‚é–“: ${TOTAL_TIME_LIMIT.toFixed(1)}s`;
            scoreDisplay.textContent = `å¾—åˆ†: 0`;

            timerInterval = setInterval(gameLoop, 100);
        }

        function gameLoop() {
            totalTimeElapsed += 0.1;
            const remainingTime = TOTAL_TIME_LIMIT - totalTimeElapsed;
            timerDisplay.textContent = `æ™‚é–“: ${remainingTime.toFixed(1)}s`;

            // Cooking timer only runs after seasoning is added
            if (gameStatus === 'COOKING' && currentStep >= 4) {
                cookTimeElapsed += 0.1;
                
                // å¢åŠ ç…®éºµè¦–è¦ºå›é¥‹
                noodlesElement.classList.remove('burnt');
                if (cookTimeElapsed >= COOK_TIME_IDEAL - 2 && cookTimeElapsed < COOK_TIME_MAX) {
                    noodlesElement.classList.add('cooked');
                } else if (cookTimeElapsed < COOK_TIME_IDEAL - 2) {
                    noodlesElement.classList.remove('cooked');
                }

                // Check for burning/overcooking
                if (cookTimeElapsed > COOK_TIME_MAX) {
                    noodlesElement.classList.add('burnt');
                    handleServeOrError('burn'); // Handle error but continue game
                    return;
                }
            }

            // Check for overall time out - END GAME
            if (remainingTime <= 0.01) {
                clearInterval(timerInterval);
                endGame('timeout');
                return;
            }
        }

        function addWater() {
            if (currentStep === 1) {
                // Step 1: Add Water
                waterElement.classList.add('filled');
                updateStepStatus(2, 'æ°´åŠ å¥½äº†ï¼ç¾åœ¨é»æ“Šçˆç¶é–‹é—œï¼ˆç´…è‰²æ—‹éˆ•ï¼‰é–‹å•Ÿçˆç«ç…®æ°´ï¼', 'success');
                stoveKnob.onclick = startBoiling; // Enable click to boil
            } else {
                handleServeOrError('wrong_order');
            }
        }

        function startBoiling() {
            if (currentStep === 2) {
                // Step 2: Start Boiling
                fireElement.classList.add('on');
                stoveKnob.classList.add('active');
                waterElement.classList.add('boiling');
                updateStepStatus(3, 'æ°´æ»¾äº†ï¼å¿«æŠŠæ³¡éºµæ‹–æ›³åˆ°é‹å­è£¡ï¼', 'success'); 
                stoveKnob.onclick = null; // Disable click after boiling starts
            } else {
                 showNotification('éŒ¯èª¤æ“ä½œï¼æ°´å·²ç¶“åœ¨ç…®äº†ã€‚', -10);
            }
        }

        function addNoodles() {
            if (currentStep === 3) {
                // Step 3: Add Noodles
                noodlesElement.classList.add('in-pot');
                updateStepStatus(4, `æ³¡éºµä¸‹é‹ï¼æ¥è‘—æŠŠèª¿å‘³ç²‰æ‹–æ›³åŠ å…¥ï¼Œå°±æœƒé–‹å§‹è¨ˆæ™‚ã€‚`, 'success'); 
            } else {
                handleServeOrError('wrong_order');
            }
        }

        function addSeasoning() {
            if (currentStep === 4) {
                // Step 4: Add Seasoning (Cooking time starts now)
                updateStepStatus(5, `èª¿å‘³ç²‰å¥½äº†ï¼éºµæ¢ç…®åˆ° ${COOK_TIME_IDEAL} ç§’å£æ„Ÿæœ€ä½³ï¼Œè«‹è€å¿ƒç­‰å¾…...é»æ“Šç¢—å…¬ä¸Šèœï¼`, 'info');
                ramenBowl.onclick = serveRamen;
            } else {
                handleServeOrError('wrong_order');
            }
        }

        function serveRamen() {
            if (currentStep >= 5) {
                handleServeOrError('serve');
            } else {
                handleServeOrError('wrong_order');
            }
        }

        function handleServeOrError(reason) {
            let message, bowlScore = 0;

            if (reason === 'serve') {
                const timeDiff = Math.abs(cookTimeElapsed - COOK_TIME_IDEAL);
                const baseScore = 100;
                let timePenalty = 0;

                if (timeDiff <= 1) {
                    message = `å®Œç¾ï¼+${baseScore} åˆ†ï¼Œå£æ„Ÿçµ•ä½³ï¼`;
                    bowlScore = baseScore;
                } else if (timeDiff <= 3) {
                    timePenalty = Math.round(timeDiff * 10);
                    message = `ä¸éŒ¯å–”ï¼+${baseScore - timePenalty} åˆ†ï¼Œå‘³é“é‚„å¯ä»¥ã€‚`;
                    bowlScore = Math.max(0, baseScore - timePenalty);
                } else {
                    timePenalty = Math.round(timeDiff * 20);
                    message = `ç³Ÿäº†... ç…®å¤ªä¹…ï¼æ‰£ ${timePenalty} åˆ†ï¼Œå£æ„Ÿä¸ä½³ã€‚`;
                    bowlScore = Math.max(-100, -timePenalty); 
                }
                bowlContent.style.opacity = '1';
                
            } else if (reason === 'wrong_order') {
                message = 'å¤§å¤±æ•—ï¼æ“ä½œæ­¥é©ŸéŒ¯èª¤ï¼Œæ‰£ 50 åˆ†ï¼';
                bowlScore = -50;
            } else if (reason === 'burn') {
                message = 'ç‡’ç„¦äº†ï¼ç…®å¤ªä¹…ï¼Œæ‰£ 100 åˆ†ï¼';
                bowlScore = -100;
            }
            
            // Add score/penalty to total score and reset pot
            totalScore += bowlScore;
            showNotification(message, bowlScore);
            scoreDisplay.textContent = `å¾—åˆ†: ${totalScore}`;
            resetPotForNextRamen();
        }

        function endGame(reason) {
            gameStatus = 'GAME_OVER';
            
            let title;
            let finalMessage;
            if (reason === 'timeout') {
                title = 'æ™‚é–“åˆ°ï¼æŒ‘æˆ°çµæŸï¼';
                finalMessage = `ä½ åœ¨ ${TOTAL_TIME_LIMIT} ç§’å…§æˆåŠŸæŒ‘æˆ°äº†å¤šç¢—æ³¡éºµï¼`;
            } else {
                title = 'éŠæˆ²çµæŸ';
                finalMessage = `éŠæˆ²å·²çµæŸã€‚`;
            }

            showModal(title, finalMessage, totalScore);
            startButton.classList.remove('hidden');
            startButton.textContent = 'å†ä¾†ä¸€æ¬¡';
        }

        function showModal(title, message, score) {
            modalMessage.innerHTML = `<h3 class="text-xl font-bold mb-2">${title}</h3><p class="mb-4">${message}</p>`;
            modalScore.textContent = `æœ€çµ‚ç¸½å¾—åˆ†: ${score}`; // é¡¯ç¤ºæœ€çµ‚ç¸½å¾—åˆ†
            feedbackModal.classList.remove('hidden');
        }

        function showNotification(message, score) {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 left-1/2 transform -translate-x-1/2 z-50 p-3 rounded-lg shadow-xl text-white font-bold transition-opacity duration-300 ${score >= 0 ? 'bg-green-500' : 'bg-red-500'}`;
            notification.textContent = `${message}`;
            document.body.appendChild(notification);
            
            // Hide and remove after a short time
            setTimeout(() => {
                notification.style.opacity = '0';
            }, 1500);
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        // --- Initialization ---

        window.onload = () => {
            initFirebase();
            setupDragAndDrop(); // Set up drag and drop listeners once
            
            // ä¿®æ­£éŒ¯èª¤ï¼šä»¥ç¨‹å¼ç¢¼æ–¹å¼ç¶å®šæŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼Œé¿å… ReferenceError
            const startBtn = document.getElementById('start-game-btn');
            if (startBtn) {
                startBtn.addEventListener('click', startGame);
            }
            
            startGame(); // Start the first game automatically
        };
    </script>
</head>
<body class="p-4 bg-gray-50">

    <div class="game-container">
        <header class="p-6 bg-yellow-400 text-gray-900 border-b-4 border-yellow-600">
            <h1 class="text-3xl font-extrabold text-center">ğŸœ é˜¿Sueæ³¡éºµå¤§æŒ‘æˆ° ğŸœ (å¿«æ‰‹ç‰ˆ)</h1>
            <p id="user-id-display" class="text-xs text-center mt-1 opacity-70">User ID: N/A</p>
        </header>

        <!-- éŠæˆ²ç‹€æ…‹èˆ‡å¾—åˆ†å€å¡Š -->
        <div class="p-4 flex justify-between items-center bg-gray-100 border-b">
            <div id="timer-display" class="text-lg font-bold text-red-600 bg-white p-2 rounded-lg shadow">æ™‚é–“: 60.0s</div>
            <div id="score-display" class="text-lg font-bold text-blue-600 bg-white p-2 rounded-lg shadow">å¾—åˆ†: 0</div>
        </div>

        <!-- ç‹€æ…‹è¨Šæ¯ -->
        <div id="status-message" class="p-3 font-semibold rounded-lg text-center bg-blue-100 text-blue-700">
            é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•
        </div>

        <!-- å»šæˆ¿æ“ä½œå€å¡Š -->
        <div class="kitchen-area">
            <!-- ç‰†é¢ -->
            <div class="kitchen-wall"></div>

            <!-- çˆç¶èˆ‡é‹å­ (çµ•å°å®šä½åœ¨ç‰†é¢èˆ‡æª¯é¢äº¤ç•Œè™•) -->
            <div class="pot-on-stove" id="pot-on-stove">
                <div class="stove">
                    <div class="burner"></div>
                    <div id="fire-element" class="fire"></div>
                    <div id="stove-knob" class="stove-knob disabled" title="é»æ“Šé–‹å•Ÿçˆç«"></div>
                </div>
                <div class="pot">
                    <div class="pot-handle pot-handle-left"></div>
                    <div class="pot-handle pot-handle-right"></div>
                    <!-- æ°´ä½å¾ 0 é–‹å§‹ï¼Œä½¿ç”¨ filled é¡åˆ¥å¡«æ»¿ -->
                    <div id="water-element" class="water"></div> 
                    <div id="noodles-element" class="noodles"></div>
                </div>
            </div>
            
            <!-- æª¯é¢ (åŒ…å«æ‰€æœ‰å¯æ‹–æ›³é“å…·å’Œç¢—å…¬) -->
            <div class="kitchen-counter">
                <!-- å·¦å´é“å…·å€ (æ°´å£º, èª¿å‘³ç²‰) -->
                <div class="flex flex-col space-y-4">
                    <!-- æ°´å£º - å¯æ‹–æ›³ -->
                    <div id="water-kettle" class="tool disabled" draggable="true">
                        <!-- å…·é«”æ°´å£ºæ¨£å¼ï¼šç°¡å–®çš„ SVG æˆ– emoji åœ–ç¤º -->
                        <div class="w-16 h-16 bg-gray-400 border-2 border-gray-600 rounded-lg flex items-center justify-center shadow-lg">
                            <span class="text-3xl" title="æ°´å£º">ğŸ«–</span> 
                        </div>
                        <span class="mt-2 text-sm font-semibold text-white text-shadow">æ°´å£º</span>
                    </div>
                    
                    <!-- èª¿å‘³åŒ… - å¯æ‹–æ›³ -->
                    <div id="seasoning-packet" class="tool disabled" draggable="true">
                        <div class="w-16 h-16 bg-red-200 border-2 border-red-500 rounded-lg flex items-center justify-center shadow-lg">
                            <span class="text-2xl" title="èª¿å‘³åŒ…">ğŸ§‚</span>
                        </div>
                        <span class="mt-2 text-sm font-semibold text-white text-shadow">èª¿å‘³ç²‰</span>
                    </div>
                </div>

                <!-- å³å´é“å…·å€ (æ³¡éºµ, ç¢—å…¬) -->
                <div class="flex flex-col space-y-4">
                    <!-- æ³¡éºµåŒ… - å¯æ‹–æ›³ -->
                    <div id="noodle-packet" class="tool disabled" draggable="true">
                        <div class="w-16 h-16 bg-yellow-200 border-2 border-yellow-500 rounded-lg flex items-center justify-center shadow-lg">
                            <span class="text-2xl" title="æ³¡éºµåŒ…">ğŸ“¦</span>
                        </div>
                        <span class="mt-2 text-sm font-semibold text-white text-shadow">æ³¡éºµ</span>
                    </div>
                    
                    <!-- ç¢—å…¬ (ä¸Šèœå€) - é»æ“Š -->
                    <div id="ramen-bowl-area" class="tool">
                        <div id="ramen-bowl" class="ramen-bowl disabled" onclick="serveRamen()">
                            <div id="bowl-content" class="ramen-bowl-content"></div>
                            <!-- SVG for simple bowl shape -->
                            <svg class="absolute top-0 left-0 w-full h-full" viewBox="0 0 120 80" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 10 C 20 50, 100 50, 115 10 L 115 80 H 5 L 5 10 Z" fill="white" stroke="#f97316" stroke-width="4"/>
                            </svg>
                        </div>
                        <span class="mt-2 text-sm font-semibold text-white text-shadow">ç¢—å…¬ (ä¸Šèœ)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- æŒ‰éˆ•å€å¡Š -->
        <div class="p-6 bg-gray-200 flex justify-center">
            <button id="start-game-btn"
                    class="px-8 py-3 bg-green-500 text-white font-bold text-xl rounded-full shadow-lg hover:bg-green-600 transition duration-150">
                é–‹å§‹éŠæˆ²
            </button>
        </div>

        <!-- éŠæˆ²çµæœ/åé¥‹å½ˆçª— -->
        <div id="feedback-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white p-8 rounded-xl shadow-2xl text-center w-full max-w-sm transform transition-all duration-300 scale-100">
                <div id="modal-message" class="text-gray-800">
                    <!-- Message content injected here -->
                </div>
                <p id="modal-score" class="text-3xl font-extrabold text-orange-600 mt-4 mb-6">æœ€çµ‚ç¸½å¾—åˆ†: 0</p>
                <button onclick="document.getElementById('feedback-modal').classList.add('hidden')"
                        class="px-6 py-2 bg-yellow-500 text-white font-semibold rounded-lg hover:bg-yellow-600 transition duration-150">
                    ç¢ºå®š
                </button>
            </div>
        </div>

    </div>

</body>
</html>